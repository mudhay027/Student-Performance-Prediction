<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Exam Performance Predictor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #b3e5fc 0%, #e1f5fe 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Segoe UI", sans-serif;
    }
    .card {
      border-radius: 25px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.15);
      background: linear-gradient(145deg, #ffffff, #e3f2fd);
      padding: 35px;
      animation: fadeIn 1s ease;
    }
    h1 {
      font-weight: bold;
      color: #0277bd;
    }
    label {
      font-weight: 600;
      color: #01579b;
    }
    .form-control, .form-select {
      border-radius: 12px;
      transition: all 0.3s ease;
    }
    .form-control:focus, .form-select:focus {
      box-shadow: 0 0 12px rgba(0,150,255,0.6);
      border-color: #0288d1;
    }
    .btn-primary {
      background: linear-gradient(90deg, #0288d1, #26c6da);
      border: none;
      border-radius: 14px;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background: linear-gradient(90deg, #0277bd, #00acc1);
      transform: scale(1.05);
      box-shadow: 0 8px 18px rgba(0,150,255,0.4);
    }
    .summary-card {
      background: linear-gradient(120deg, #4fc3f7, #29b6f6);
      color: white;
      border-radius: 18px;
      padding: 20px;
      margin-top: 25px;
      animation: slideUp 1s ease;
      box-shadow: 0 0 25px rgba(0,150,255,0.6);
    }
    .progress {
      height: 25px;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 15px;
      background: rgba(255,255,255,0.3);
    }
    .progress-bar {
      background: linear-gradient(90deg, #00c6ff, #0072ff);
      font-weight: bold;
      font-size: 0.9rem;
      animation: fillBar 2s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(50px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fillBar {
      from { width: 0%; }
      to { width: {{ results if results else 0 }}%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1 class="text-center mb-4"><i class="bi bi-bar-chart-fill text-primary"></i> Student Exam Performance Predictor</h1>
      <form action="{{ url_for('predict_datapoint')}}" method="post">

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-person-fill"></i> Gender</label>
            <select class="form-select" name="gender" required>
              <option disabled value="">Select Gender</option>
              <option value="male" {% if gender == "male" %}selected{% endif %}>Male</option>
              <option value="female" {% if gender == "female" %}selected{% endif %}>Female</option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-people-fill"></i> Race/Ethnicity</label>
            <select class="form-select" name="race/ethnicity" required>
              <option disabled value="">Select Ethnicity</option>
              <option value="group A" {% if ethnicity == "group A" %}selected{% endif %}>Group A</option>
              <option value="group B" {% if ethnicity == "group B" %}selected{% endif %}>Group B</option>
              <option value="group C" {% if ethnicity == "group C" %}selected{% endif %}>Group C</option>
              <option value="group D" {% if ethnicity == "group D" %}selected{% endif %}>Group D</option>
              <option value="group E" {% if ethnicity == "group E" %}selected{% endif %}>Group E</option>
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label"><i class="bi bi-mortarboard-fill"></i> Parental Level of Education</label>
          <select class="form-select" name="parental_level_of_education" required>
            <option disabled value="">Select Education Level</option>
            <option value="associate's degree" {% if parental_level == "associate's degree" %}selected{% endif %}>Associate's degree</option>
            <option value="bachelor's degree" {% if parental_level == "bachelor's degree" %}selected{% endif %}>Bachelor's degree</option>
            <option value="high school" {% if parental_level == "high school" %}selected{% endif %}>High school</option>
            <option value="master's degree" {% if parental_level == "master's degree" %}selected{% endif %}>Master's degree</option>
            <option value="some college" {% if parental_level == "some college" %}selected{% endif %}>Some college</option>
            <option value="some high school" {% if parental_level == "some high school" %}selected{% endif %}>Some high school</option>
          </select>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-egg-fried"></i> Lunch Type</label>
            <select class="form-select" name="lunch" required>
              <option disabled value="">Select Lunch</option>
              <option value="free/reduced" {% if lunch == "free/reduced" %}selected{% endif %}>Free/Reduced</option>
              <option value="standard" {% if lunch == "standard" %}selected{% endif %}>Standard</option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-book-half"></i> Test Preparation Course</label>
            <select class="form-select" name="test_preparation_course" required>
              <option disabled value="">Select Course</option>
              <option value="none" {% if test_prep == "none" %}selected{% endif %}>None</option>
              <option value="completed" {% if test_prep == "completed" %}selected{% endif %}>Completed</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-book"></i> Reading Score (0‚Äì100)</label>
            <input class="form-control" type="number" name="reading score" min="0" max="100" 
                   value="{{ reading_score if reading_score is defined else '' }}" required>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label"><i class="bi bi-pencil"></i> Writing Score (0‚Äì100)</label>
            <input class="form-control" type="number" name="writing score" min="0" max="100" 
                   value="{{ writing_score if writing_score is defined else '' }}" required>
          </div>
        </div>

        <div class="d-grid">
          <button type="submit" class="btn btn-primary btn-lg"><i class="bi bi-magic"></i> Predict</button>
        </div>
      </form>

      {% if results %}
        <div class="summary-card mt-4">
          <h4 class="text-center">Prediction Summary</h4>
          <ul class="list-unstyled mb-3">
            <li><b>üë§ Gender:</b> {{ gender }}</li>
            <li><b>üåç Ethnicity:</b> {{ ethnicity }}</li>
            <li><b>üéì Parental Education:</b> {{ parental_level }}</li>
            <li><b>üçΩÔ∏è Lunch:</b> {{ lunch }}</li>
            <li><b>üìò Test Prep:</b> {{ test_prep }}</li>
            <li><b>üìñ Reading Score:</b> {{ reading_score }}</li>
            <li><b>‚úèÔ∏è Writing Score:</b> {{ writing_score }}</li>
          </ul>
          <h5 class="text-center mb-3">‚úÖ Predicted Math Score: <b>{{ results }}</b></h5>

          <!-- Progress Bar -->
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                 role="progressbar" 
                 style="width: {{ results }}%">
              {{ results }}%
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</body>
</html>
